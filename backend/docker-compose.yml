version: '3.8'

services:

 web:
  build:
   context: .
  volumes:
    - media:/code/media
  ports:
    - "9001:80"
  environment:
    - ROOT_PATH_PREFIX=/data-collector-admin
    - SQLALCHEMY_DATABASE_URI=postgresql://postgres:postgres@db/postgres
  depends_on:
   - db

 db:
  image: postgres:15
  environment:
    - POSTGRES_PASSWORD=postgres
  volumes:
    - pgdata:/var/lib/postgresql/data

volumes:
  media:
  pgdata:
